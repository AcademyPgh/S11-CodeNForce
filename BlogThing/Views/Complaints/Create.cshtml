@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
    function search() {
        const houseNumber = document.getElementById("houseNumber").value;
        const streetName = document.getElementById("streetName").value.toUpperCase();
        const zipCode = document.getElementById("zip").value; 

        const searchURL = `https://data.wprdc.org/api/3/action/datastore_search?filters={\"PROPERTYZIP\": \"${zipCode}\", \"PROPERTYHOUSENUM\":\"${houseNumber}\", \"PROPERTYADDRESS\":\"${streetName}\"}&resource_id=518b583f-7cc8-4f60-94d0-174cc98310dc&fields=\"_id\"`;

        console.log(searchURL);

        var request = new XMLHttpRequest();

        request.open('GET', searchURL);

        request.onload = function () {
            var data = JSON.parse(this.response);
            console.log(data);
            console.log(data.result);
            if (data.result.records.length == 0) {
                document.getElementById("FoundProperty").innerHTML = "Property not found."
            }
            else if (data.result.records.length == 1) {
                var property = data.result.records[0];
                document.getElementById("FoundProperty").innerHTML = property._id;
            }

        }

        request.send();
    }
</script>

<div>
    <form id="address">
        <ul>
            <li>
                <label for="houseNumber">House number</label><br />
                <input type="text" name="houseNumber" id="houseNumber"/>
            </li>
            <li>
                <label for="streetName">Street name</label><br />
                <input type="text" name="streetName" id="streetName" />
            </li>
            <li>
                <label for="zip"></label>ZIP<br />
                <input type="text" name="zip" id="zip"/>
            </li>
            <li>
                <input type="button" value="Search" onClick="search()"/>
            </li>
        </ul>
    </form>
    <div id="FoundProperty">

    </div>
</div>